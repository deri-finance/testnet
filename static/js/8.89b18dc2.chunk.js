(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[8],{1748:function(e,t,n){"use strict";t.a=n.p+"static/media/staked.46571832.svg"},1988:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a,s,r=n(64),c=n(0),i=n(2),o=n(10),d=n(5),l=n(74),b=n(597),u=n(152),p=n(602),j=n(603),m=n(604),O=n(601),x=n(605),f=n(1748),v=n(607),h=(n(2337),n(63)),_=n(230),k=n(30),S=n(22),g=n(91),T=n.n(g),E=n(3),w="0x96C3966534b4377691e11e163A0409Ad01667343";function y(e){var t=e.lang,n=e.pool,a=e.wallet,s=Object(l.g)(),r=["311860","311904"],h=Object(d.useState)({}),g=Object(o.a)(h,2),y=g[0],P=g[1],N=Object(d.useState)(n.address),C=Object(o.a)(N,2),A=C[0],L=C[1],U=Object(d.useState)(!1),I=Object(o.a)(U,2),D=I[0],F=I[1],X=Object(d.useState)(),B=Object(o.a)(X,2),H=B[0],q=B[1],W=Object(d.useState)(!0),K=Object(o.a)(W,2),z=(K[0],K[1]),M=Object(d.useState)([]),V=Object(o.a)(M,2),G=V[0],J=V[1],Z=Object(d.useState)([]),Y=Object(o.a)(Z,2),Q=Y[0],$=Y[1],ee=Object(d.useState)(0),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],se=Object(d.useState)(0),re=Object(o.a)(se,2),ce=re[0],ie=re[1],oe=Object(d.useState)(),de=Object(o.a)(oe,2),le=de[0],be=de[1],ue=Object(d.useState)(0),pe=Object(o.a)(ue,2),je=pe[0],me=pe[1],Oe=Object(_.a)("ERC20",42161,"0x21E60EE73F17AC0A411ae5D690f908c3ED66Fe12"),xe=Object(_.a)("ERC20",42161,"0x82af49447d8a07e3bd95bd0d56f35241523fbab1"),fe=Object(_.a)("arbitrumLp",42161),ve=Object(_.a)("LpTokenId",42161),he=Object(_.a)("PairAbi",42161),_e=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P({}),e.next=3,n.getPoolInfo(n.address,n.chainId,n.version);case 3:t=e.sent,L(n.address),P(t);case 6:case"end":return e.stop()}}),e)}))),[n]),ke=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a,s,r,i,o,d,l,b,u,p,j;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P({}),e.next=3,Oe.balanceOf(w);case 3:return t=e.sent,e.next=6,xe.balanceOf(w);case 6:return n=e.sent,a="".concat(Object({NODE_ENV:"development",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_WSS_URL:"wss://testnetapi.deri.io",REACT_APP_EXECUTOR_WSS_URL:"wss://executortestnet.deri.io",REACT_APP_HTTP_URL:"https://oracletestnet.deri.io",REACT_APP_KLINE_HTTP_URL:"https://klinetestnet.deri.io",REACT_APP_KLINE_WSS_URL:"wss://klinetestnet.deri.io",REACT_APP_REST_SERVER_URL:"https://testnetapi.deri.io",REACT_APP_SINGLE_DOMAIN:"on",REACT_APP_WSS_URL:"wss://oracletestnet.deri.io"}).REACT_APP_INFO_HTTP_URL,"/stats_for_token"),e.next=10,fetch(a);case 10:return s=e.sent,e.next=13,s.json();case 13:return r=e.sent,"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=17,T.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 17:i=e.sent,o=i.data.ETHUSD,d=r.data.price,l=k.a.from(t._hex).toString()/Math.pow(10,18),b=k.a.from(n._hex).toString()/Math.pow(10,18),u=Object(S.a)(l).times(d).toNumber(),p=Object(S.a)(b).times(o).toNumber(),j=u+p,console.log("getLiquidity",j),P({liquidity:j});case 27:case"end":return e.stop()}}),e)}))),[Oe,xe]),Se=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||"v3"!==n.version&&"v3_lite"!==n.version){e.next=5;break}return e.next=3,n.getVenusEarned(a,n.address);case 3:t=e.sent,q(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIsStaked(a,n);case 2:(t=e.sent)&&(F(t.isStaked),L(t.poolAddress));case 4:case"end":return e.stop()}}),e)}))),[a,n]),Te=Object(d.useCallback)(function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setTimeout(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.z)(42161),e.next=3,fe.connect(t);case 3:return n=e.sent,console.log("bTime",n),a=r.map(function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var a,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,n.getSecondsPerLiquidityInsideX128(t);case 3:return(s=e.sent)&&(a.id=t,a.timestamp=k.a.from(s.timestamp._hex).toString(),a.secondsPerLiquidityInsideX128=k.a.from(s.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(a);case 8:a=e.sent,$(a);case 10:case"end":return e.stop()}}),e)}))),1e3);case 2:return e.abrupt("return",undefined);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[fe]),Ee=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.map(function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,fe.getSecondsPerLiquidityInsideX128(t);case 3:return(a=e.sent)&&(n.id=t,n.timestamp=k.a.from(a.timestamp._hex).toString(),n.secondsPerLiquidityInsideX128=k.a.from(a.secondsPerLiquidityInsideX128._hex).toString()),console.log("aTime res",a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:t=e.sent,Te(),J(t);case 6:case"end":return e.stop()}}),e)}))),[fe]),we=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a,s,d,l,b,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.map(function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,ve.positions(t);case 3:return a=e.sent,n={tickLower:a.tickLower,tickUpper:a.tickUpper,liquidity:k.a.from(a.liquidity._hex).toString()},e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return t=e.sent,e.next=6,he.slot0();case 6:return n=(n=e.sent).tick,a=t.map((function(e){var t=Object(S.r)(n,e.tickLower,e.tickUpper,e.liquidity),a=Object(o.a)(t,2),s=a[0],r=a[1];return{deri:s/Math.pow(10,18),eth:r/Math.pow(10,18)}})),s=a.reduce((function(e,t){return e+t.deri}),0),d=a.reduce((function(e,t){return e+t.eth}),0),"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=14,T.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 14:l=e.sent,console.log("ETHUSD",l.data),b=l.data.ETHUSD,u=Object(S.a)(d).times(b).toNumber(),ie(u),me(s);case 20:case"end":return e.stop()}}),e)}))),[ve,r,he]),ye=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a,s,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ne&&je&&ce)){e.next=14;break}return t="".concat(Object({NODE_ENV:"development",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_WSS_URL:"wss://testnetapi.deri.io",REACT_APP_EXECUTOR_WSS_URL:"wss://executortestnet.deri.io",REACT_APP_HTTP_URL:"https://oracletestnet.deri.io",REACT_APP_KLINE_HTTP_URL:"https://klinetestnet.deri.io",REACT_APP_KLINE_WSS_URL:"wss://klinetestnet.deri.io",REACT_APP_REST_SERVER_URL:"https://testnetapi.deri.io",REACT_APP_SINGLE_DOMAIN:"on",REACT_APP_WSS_URL:"wss://oracletestnet.deri.io"}).REACT_APP_INFO_HTTP_URL,"/stats_for_token"),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,s=a.data.price,r=Object(S.a)(je).times(s).toNumber(),i=r+ce,o=Object(S.a)(ne).times(s).toNumber(),be(o/i*100);case 14:case"end":return e.stop()}}),e)}))),[ne,je,ce]),Pe=Object(d.useCallback)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getTimeRewardInfo",G,Q),t=Q.map(function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n,a,s,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.find((function(e){return e.id===t.id})),a=n.secondsPerLiquidityInsideX128,e.next=4,fe.getRewardInBetween(t.id,t.timestamp,a,t.secondsPerLiquidityInsideX128);case 4:if(!(s=e.sent)){e.next=8;break}return r={reward:k.a.from(s._hex).toString()/Math.pow(10,18),id:t.id,timestamp:Math.abs(t.timestamp-n.timestamp)},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(t);case 4:t=e.sent,console.log("getTimeRewardInfo",t),0!==t[0].timestamp&&(n=t.reduce((function(e,t){return e+t.reward}),0),31536e6,a=n/(1e3*t[0].timestamp)*31536e6,ae(a));case 7:case"end":return e.stop()}}),e)}))),[G,Q,fe]),Ne=function(e){e.target.src=v.default};Object(d.useEffect)((function(){"ulp"===n.version&&Oe?ke():_e(),a.isConnected()&&(ge(),Se())}),[n,a.detail.account,Oe,xe]),Object(d.useEffect)((function(){var e=sessionStorage.getItem(n.address);null!==e&&e&&z(!1)}),[n]);Object(d.useEffect)((function(){"ulp"===n.version&&fe&&(J([]),$([]),be(),Ee())}),[n.version,fe]),Object(d.useEffect)((function(){"ulp"===n.version&&ve&&he&&we()}),[ve,n.version,he]),Object(d.useEffect)((function(){ne&&je&&ce&&ye()}),[ne,je,ce]),Object(d.useEffect)((function(){G.length&&fe&&Q.length&&Pe()}),[G,Q,fe]);var Re={BSC:"BNB Chain",ZKSYNC:"zkSync Era"},Ce="ulp"===n.version?"/lppool/".concat(n.chainId,"/").concat(n.address):"/pool/".concat(n.version||"v1","/").concat(n.chainId,"/").concat(n.type,"/").concat(n.address);return Object(E.jsx)("div",{className:"".concat("0x243681B8Cd79E3823fF574e07B2378B8Ab292c1E"===n.address?"showGuide":""," card-box"),children:Object(E.jsxs)("div",{className:"v2_lite_open"===n.version?"card-list open-list":"card-list",onClick:function(){!function(e){"v2_lite_open"!==n.version&&s.push(e)}(Ce)},children:[Object(E.jsxs)("div",{className:"card-header ".concat(n.retired?"".concat(n.version):""," ").concat(n.new?"new":""),children:[Object(E.jsxs)("div",{className:"pool-network-type",children:[Object(E.jsx)("div",{className:"network-logo",children:Object(E.jsx)("img",{alt:"",src:function(e){var t;return"56"===e||"97"===e?t=p.default:"137"===e?t=m.default:"1"===e?t=O.default:"42161"===e||"421611"===e||"421613"===e?t=j.default:"324"===e&&(t=x.default),t}(n.chainId)})}),Object(E.jsxs)("div",{className:"pool-type-network-text",children:[Object(E.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==n.address&&Object(E.jsxs)(E.Fragment,{children:[t[n.type]," ",t[n.zone]]}),"0x1eF92eDA3CFeefb8Dae0DB4507f860d3b73f29BA"===n.address&&Object(E.jsx)(E.Fragment,{children:"DERI-based"}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===n.address&&Object(E.jsx)(E.Fragment,{children:t[n.zone]})]}),Object(E.jsx)("div",{className:"pool-network-text",children:Re[n.chain.toUpperCase()]?Re[n.chain.toUpperCase()]:n.chain.toUpperCase()})]})]}),Object(E.jsxs)("div",{className:"base-token-logo",children:[n.isLp&&Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"lp-base-token-bg",children:[Object(E.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)}),Object(E.jsx)("span",{className:"lp-con",children:"+"}),Object(E.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[1].bTokenSymbol)})]})}),!n.isLp&&"v3"!==n.version&&"v3_lite"!==n.version&&Object(E.jsx)(E.Fragment,{children:n.bTokens.map((function(e,t){return Object(E.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(E.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol),children:"v2_lite_open"===n.version&&Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("img",{alt:"",onError:Ne,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})})})},t)}))}),("v3"===n.version||"v3_lite"===n.version)&&!n.singleBtoken&&Object(E.jsx)(R,{bTokens:n.bTokens}),("v3"===n.version||"v3_lite"===n.version)&&n.singleBtoken&&Object(E.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(E.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)})})]})]}),Object(E.jsxs)("div",{className:"card-content",children:[Object(E.jsx)("div",{className:"max-apy",children:"v2_lite_open"!==n.version&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"max-apy-title",children:"v2"===n.version||"v3_lite"===n.version||"v3"===n.version?t["max-apy"]:t.apy}),Object(E.jsx)("div",{className:"max-apy-num",children:Object(E.jsx)(b.a,{value:"ulp"===n.version?le:y.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})})]})}),Object(E.jsxs)("div",{className:"total-pool-liquidity",children:[Object(E.jsx)("div",{className:"total-liquidity-title",children:t["total-pool-liquidity"]}),Object(E.jsx)("div",{className:"total-liquidity-num",children:Object(E.jsx)(b.a,{value:y.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:"lp"===n.type?"ulp"===n.version?0:7:0})})]}),Object(E.jsxs)("div",{className:"your-deri-epoch",children:[D&&A===n.address&&Object(E.jsxs)("div",{className:"staked-box",children:[Object(E.jsx)("img",{src:f.a,alt:""}),t.staked]}),+H>0&&("v3"===n.version||"v3_lite"===n.version)&&Object(E.jsx)("span",{className:"xvs-collectable",children:Object(E.jsxs)("div",{className:"staked-box",children:[Object(E.jsx)(b.a,{width:"50px",value:H,displayType:"text",thousandSeparator:!0,decimalScale:2})," \xa0 XVS  ",t.collectable]})})]}),Object(E.jsx)("div",{className:"stake-button",children:Object(E.jsx)(u.a,{disabled:"v2_lite_open"===n.version,className:"button",outline:!0,label:"v2_lite_open"===n.version?t.operating:t.stake})})]})]})})}var P=h.a.div(a||(a=Object(r.a)(["\n  @-webkit-keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px);\n        -moz-transform : translateX(100px);\n    }\n  }\n\n  @keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px) ;\n        -moz-transform : translateX(100px) ;\n    }\n  }\n  .base-token{\n    margin-left: 0px !important;\n    z-index : -2;\n    visibility: hidden;\n    background-color: #111e34;\n    border : 1px solid #fff;\n  }\n  @media only screen and (max-width: 760px) {\n    .base-token{\n      display:none;\n    }\n  }\n  .base-token-box-bg.explode:hover .move  {\n    -webkit-animation : explode .4s .0s linear;\n    -moz-animation :  explode .4s .0s linear;\n    animation: explode .4s .0s linear;\n    visibility: visible;    \n  }\n  \n  .base-token-box-bg.explode:hover .base-token {\n    z-index : 2 !important;\n  } \n\n"]))),N=h.a.div(s||(s=Object(r.a)(["\n  position: absolute;\n  transform : ",";\n  width: 48px;\n  height: 48px;\n  display: inline-block;\n  border-radius: 50%;\n  .move {\n    transform : translateX(100px) ",";\n  }\n"])),(function(e){return"rotate(".concat(-e.rotate,"deg)")}),(function(e){return"rotate(".concat(e.rotate,"deg)")})),R=function(e){var t=e.bTokens,n=void 0===t?[]:t,a=360/n.length;return Object(E.jsxs)(P,{className:"v3-tokens",children:[Object(E.jsx)("div",{className:"tokens",children:n.filter((function(e,t){return t<3})).map((function(e,t){return Object(E.jsx)("div",{className:"base-token-box-bg",children:Object(E.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol)})},t)}))}),Object(E.jsxs)("div",{className:"base-token-box-bg explode",children:[Object(E.jsxs)("div",{className:"base-token-bg num-token",children:[n.length-3," +"]}),n.map((function(e,t){var n=a*t;return Object(E.jsx)(N,{className:"base-token",rotate:n,width:"100",children:Object(E.jsx)("div",{width:"100",rotate:n,className:"base-token-bg move ".concat(e.bTokenSymbol)})},t)}))]})]})}},1989:function(e,t,n){},2337:function(e,t,n){}}]);
//# sourceMappingURL=8.89b18dc2.chunk.js.map